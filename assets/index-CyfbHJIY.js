var E=(u,M,p)=>new Promise((C,f)=>{var d=c=>{try{w(p.next(c))}catch(v){f(v)}},k=c=>{try{w(p.throw(c))}catch(v){f(v)}},w=c=>c.done?C(c.value):Promise.resolve(c.value).then(d,k);w((p=p.apply(u,M)).next())});import{y as U,_ as ee,g as te,r as n,d as S,c as b,e as l,f as h,h as Y,o as T,F as G,z as ae,k as R,l as F,i as B,A as D,B as L,p as le,q as oe,C as se,D as ie}from"./index-Cvg2Ob7C.js";import{g as re}from"./user-fyIOEaJ9.js";import{L as N}from"./index-D8LHBzyh.js";import ne from"./bar-chart-Bul__B3_.js";import de from"./pie-chart-Beyfaaus.js";import ce from"./toolTip-RSvLz7aw.js";import"./base-echart-C60CEXTt.js";function ue(u){return U({url:"/timeCard/holiday",method:"get",params:u})}function me(u){return U({url:"/timeCard/import",method:"post",data:u})}const ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAEyUlEQVRoQ+1ZbWhbVRh+35u0axK3+UsdDOf3dOIEN8YYsvrV2XUKQtckAz9AEEXF9ibWLwSHglI7k866qWP4QwWTuxUFxdG5oVNURFCngorU6aaofzr2kZt0yT2vz82sxja59ybNGge5cCGc9+1znuf9OOfcU6bT/OHTnD81BTQ6g80MVJuBwBuxVRrLamFuU355Nded/KlajFL/U56B4EjfArK4ixXfSCwdRHzmJAERyijmrlzkuQ9rFXFKBLQZfdeBcCcTr2GmK6eTk3ERPgbbIiH6w4wkFjRUQNtIfJFWUGtJqBPr2vUgfkYpIZA8wSKfYGxU/Dxqdie+ah2JL26x5DvbTxH1ZiOJ52sRUVsGDD0QImrHzDbhTpTF4mmTi/wI4qOw7zaDmb108zZzqk8oFTNg7ylmYW7+POoanqhWhGcBrTvjl/oKVgeiexMzr6kw0REheY+F37ZEHXQjozEvAdYW2w8inhF/fmu2e/hXt7+rqomDRt86Em07lJ5TDXCtvgjAx4p9t+XCmw54wXDMgB11vyX74dTqBaxePlidvjS/n7ecNm5Eezg/jgJCaT2B+taLECJ3WiKeouI2aSW7pnEPSvRe224pWZ3bkPzIDctRQDClv4saXQv2RiaSjLiB1cOOoB229wr0xP1YXov94fQ4ZyAV22Mvi0jpdjOauMsNrB72YFo/hCwsBFZ/JpLY5IbZFOAWoWrtzQyURgw7ZbMH/iclJNvMaPLuasmU829L6zf4iB+D7Vp3PNmnREay0aHhSr4eV6H6CAimYy9hwqoDgT3hLTOfv4NuHT46VYg3AUQvY1O5xz1ilT1CKX2ImHtPesg+EXldsTZGSoHf9MfHfD4M0cmDI36X5TArAuakYpf4mX4oUhd60Qz4Hw7mCoNMYu/uhxTLk9nw0M5yQkLp2CDGH7RteZalJ8LJb0r9ZkUASDyKSZ8G+6OZaHJ+IKU/i6N0fymRgvgumogOjlUQ8SfGz8L7CHbngeoFyMx6ALX/AiJ1H8rmMywGK1FO36KcLgeR9/FehXe+EvVApWb950wm8hoCcPusCwikYwMa0UM46/9mRpILQWh06keRYtVTsYxS+n4IXlquD7yV0AwzEDD61mui7Sj2ANE6RXzch0aejCTGPscisaJc+QSM+NWaSPFYrdAz2UjSqD4DdViFgqnYzydvIeR3RVqU/PQL59UtpNHBbDj5ZlnyqdhKZknjdHouRB6AyAum+s1KBuxJA4a+QhPeg59zy5F1HBM6TH7rmsz6zV/XJqAOGbAnbjX0K/yKXkH9L/cqwr7ZsNjqnQhvLi7DtQmYYQ9MnXROqv9CjQvLUBqXwfafKsD9kY6GnYf94h1U/RNmdOgLJ7EeS6j5Rea1Yqj5QVMaquYHjefC+dexviWUju0GdEcjrlVwyI5nowlcrDk/zhdbaX2LfVMGAWOm1rKMwgNH3ABnYg9g59WYPrUxRFQXltBdbniOAtoMvd0n/MHfIMcA67gmu03mZMc/PFpw1FhVJG9ft3PuYgpvPe6G6Xq9jpp8Cll43A2ofnYZtxSHcxsSe71gugqwQVqN+BK/knbsmWd7Aa3JBzWD0+ZYTuNdFE6Oe8XwJMArWCP8mgIaEfXSOZsZaHQG/gIQw3FPQAe+wAAAAABJRU5ErkJggg==",he="data:image/png;base64,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",Ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAE+klEQVRoQ+1ZfWwTZRh/3+u6IZT1WhaIGhTlLzc/Yq8LGqLzH8UY1JEYQuJXYqLL2psBFEKCISNqCBITZO0EDBHUxJCYGEMQxT8wEZ1Kr406xY+oUVTU6fV0rpN2u8ffdVzXbl1713ktTXZ/tXfP8z6/3/t8vnec1fnF6xw/myNQaw9O80CfpF7DOF9Ua2DF7PNMw5D8ycLP85/lCOxZQc3CWPI453zFhQh+EhMdC8f8d5j/cwSikroFO7/jwgY/gY4T7w4p4t7sbxNwNKjiBu+qBwJE9Lys+EOFBCR1PzzwcD0QYEQvhBX/I3MEauatOQ/UbOvPG57zwJwHZrkDxUIoElT3ccaztbVWFxEbQmc9yxiliLHLMNZcUgwLMdovx/zZppvrxLUiANCHiPMjjeQ91qXw1FTA/QH1JhLYzYxYNxrtpcbzogQwC1W3ExM7qOuNW3sSC36x6vFIILmeC7QDDF6uYSemf5nuWhOOe98ygfe3a1eyceogTq3wxhWc0QKAPEMkfMNIOCknmgdM2ch1w23cnenERPp01UMI4aK5uLCqO+b92DDeH9AkXdCfQ+6tLOkForMg07s47j2wlvHxfNn8cdrZECJK6brQ0ZMQYwYAhGwIMR2dBpzYG8T4F5zrG5Ci8/KfYwPecTOxMz9XqkYA4G/viXvfNgBFAtomxPIzxXY9lRY9mz7lIxFJPYwqtHaqDBL4/bTbd+vGAT5aEEIOJ/GRcMx3V3bnA+q9TOCvzBQykMtuaik8OA+8GVZ8qxF6VJ0yqje0huMLT0fbU0uZfu5bFG/3bAhkS6lOshz3R50PIaIPUfJuzIbODGGRT8b0QLm+hEb352havNxxAkR8i6yIO6Nt5GEXaRrAukpVHCshlNPX6T7HQwjl7wZZ8X4UCSbvh7GXyjUtqx6YWIcOO++BcbZMTvh+iEjJ7ZyzbVYJRKXkY8iVO015VJ8WJG1boT4NOk5gyCO6e9/lY9Fgsg/GZasEismB1BBIteRIoTE6TmCyriefhQc2liMgMBbojvkSU+V2X/3PEndTZjCfAEJo2HECaEbLQ6fE76JBbTMM7ixHYCK02XsAqhfIEkno3J78e6hEXzuexIz4qrAiHu+Xkp3oOq9bImBVCGOH4x5A8u3C4WPzi8to3sgi7S+EUaNVfOXkuM4ecpwA3qKdRiNrnWhkyYMg8GA5YFaeI3xU3SVi9D5/OTkLcaLVIcV/dJ80cnGGpb8HiSYrIEvJcGKPhhRf32QOSMknsfATs124mD52KybHfO3GsxnHaBuGEZYDaHgrC4Y541REuh5HpnttrGVZlHS2QY77dmdDKai+CuPrLCsXlB76OXOuUVo/6PnNuF3whcZw8ThL34Nq8b9/ocFMNGrMRIbRXpwTWyRtO4xvBQIb3+nogwZquLtLaf7D5GRDuaL9Kqlk9UiJkPlJ0Pm23+PioV6G2pN3VURg7/XDrRnX2OJKKeEY8je8ETf190jacoFTBxLzWvhjKTrZfOTNj+ghX+EMfdI8QxezZ5tAVNIex0FoV6XgTT3jaMh111P5bycqWdM2AYzFv0JpSSXGiuoQU7DjryEujvYo/s/srmubAL6l4TBd+LbArtGZ5HHW/RLfvq6ys55tAvDACSjdYseIVVnjtYms+G6zKj+tjFpRzPYLogesyNqW4U0Hwqfmn7GjZ9sDdhavhmzdE/gPyNQ4Pl7krHYAAAAASUVORK5CYII=",fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAEzklEQVRoQ+1aXYgbVRS+d5KZWGFraQWr+ekuFH2p+thKpaAgtq5QUGhRlgUV/HnRbf1Zs5O1oZtkrS7VWqFWFPwDqwj6YHdtQRB80IoVpRaqVJAkLViEtqyWZia5x28mTJxoMndmJ8m6kllYZphzzznfPefc+5074czjMnLJNxjnD3nJ9PDdcS7EU+pk+Qu3Te4JIJ+iHjrozxTR+1qmdL8j7AmgkkveB4GHGcffIl5EPMU5G3JcIGK7Y5niLut5UR0LMidmPnUHEX2ClL4S485renHlkgJgOVvJJwtIhrR1T4xujOmlHxsRoOx1VxtqZCcENuC1EmR2uiGL4rsEX45gpvc5+o18ahT3b9dnnjareumIDYCyg1cYau0EBqzthjPhdNJbml56oB6BxAhnyrvWvcLEXVG9PGcDMAqJ9Zj0r8MZ6tJooj+w6gz8C4AQw9HJ8qwNoJpPbBFMme2SC6HVqqayjGd/vdwUgT6A0PPqX0E/Av7nqjuS/Qh0Z179a5VGwJxKbCZFmfOvsi7JiSYF4wMgWs8EHQsucI642KFF/jxsVAfehI572+loBQDUeguo9Wf2PhAYANFJxmujmn72O3sjzCf3As4O3yCIXlOr82mevXDBtm8RNcaO9gQAGGEhlinp/zSG5ucAmOKjniCITuD9g9hZv3XkaHr1oCm09/C8MQiAJirhJwKYoVNcYSNaunjcMWQW4reoE2e+cp5BtiyeMtLCkYtgX+PaRPFgw3GLf0VFGqnznCxyLWvAzYXkAOglEKqdDeN74gmzGnkHz7cxor2Y0Sedd5Vc6qPmfKZDKquMcf3cb45MtZC6uybYq5BbI3Peeh8KAFLmY6TMPX87iC6N8wN4vqoBiGgGMk+7QBxGha9VBD3i7mFp6pohQ4ntR+EN+3HckQlVxGjfZtG+DVN2xQpTHUAK8G2tjCPFXozpxbarUSWfysJxuw0MeoWKgG2M6Btidl+62ss4uqRpdEkTbplqLrm1xvnLcH4wqONeEWgq4k7SaSLxfCxTTlPu2jUGjx5Ek3TnQh33BOCm0/IiDuoCHUOqrZdE62fNrG1ksehyU7BfvGRD1UBQ1/3KY3FoFD6a9Z8QqevbjZXWQCdTyDcAV9Fj6T2F+rohEIDF7sjcq1YfgLSIcTKgMBolztdhOd3tN008i5jYC9hfxi2ZBUUgEJUAewRdeKxuLFnGThwPCwIbZOcAyItY7NP08pjlNKgzGCVfFxpAJ4tYmkLMBSCX/B60+WYPAGPWcaDs2wKKeA+ox7MLTaGADU1TBH5ABG5qu+RFLy3n47/PI9W2I9UOtZP7z6aQ6gDIp7aB/3zQFkAnU6iTNdAH0CJk0lOJJR8B6SpE7BUtU3zCzzKqKmwlTxfPy4qYuVa20GROBgCNymnOattVEbloKvy09w5LM1q0tt+oRV736gWg8ywnthU7+xCI3Ieh6LQ8hcJuW+HGS2tAFoFw5sOPdgBU8/FhwSKf2hq52KBNlI8t7GQuvE+BNDgA7F0bXyoVxudVvTht47D+LZUUaoX6/wHAnIrfTkrk80Bx7aEwyGHbXxTUvxMX4qtMUkrIqGU99MunKfoSx5qb2gk3kJm51K3EaUZ2HOLTangxYpexV8xpqnicj58pt1P4F8+S017wz7d6AAAAAElFTkSuQmCC",A=u=>(le("data-v-e4dfe5da"),u=u(),oe(),u),ye={class:"app-container"},ge={class:"time-card-left"},pe=A(()=>l("div",{style:{"margin-bottom":"12px"}},[l("span",null,"快递查询工具："),l("a",{href:"https://www.ickd.cn/",target:"_blank",style:{color:"#409eff"}},"快递查询")],-1)),we={class:"left-title"},xe=A(()=>l("div",{class:"left-title-text"},"输入加班数据",-1)),be={class:"left-title-button"},Te={class:"left-textarea"},Ce={class:"time-card-right"},ke=A(()=>l("div",{class:"right-title"},"加班统计报告",-1)),Ee={class:"right-income"},Se={class:"timeCard-detail-item timeCard-detail-income"},Le=["src"],Ie={class:"item-right"},ze=A(()=>l("div",{class:"item-right-title",style:{display:"flex"}},"加班收入",-1)),Fe={class:"item-right-number"},Be={key:0,class:"item-right-tip"},De={key:0,class:"item-tag"},Ve={class:"timeCard-detail-item timeCard-detail-meals"},Ye=["src"],Ne={class:"item-right"},Me=A(()=>l("div",{class:"item-right-title"},"餐费补贴",-1)),Oe={class:"item-right-number"},Ge={class:"timeCard-detail-item timeCard-detail-time"},Re=["src"],Ue={class:"item-right"},He=A(()=>l("div",{class:"item-right-title"},"加班时长",-1)),qe={class:"item-right-number"},Pe={key:0,class:"item-right-tip"},Qe={class:"timeCard-detail-item timeCard-detail-total"},Xe=["src"],je={class:"item-right"},Ze=A(()=>l("div",{class:"item-right-title"},"总收入",-1)),Je={class:"item-right-number"},Ke={class:"right-bar"},We=A(()=>l("div",{class:"right-bar-title"},"加班收入明细",-1)),_e={class:"right-bar-chart"},$e={class:"right-pie"},et=A(()=>l("div",{class:"right-pie-title"},"加班时长明细",-1)),tt={class:"right-pie-chart"},at={__name:"index",setup(u){const{proxy:M}=te(),p=(o,a)=>{const s=document.createElement("div"),e=h(o,a);return se(e,s),e.el},C=n("桂林"),f=n(""),d=n([]),k=n({}),w=n([]),c=n({}),v=n(!1),I=n(!1),H=n(["工作日","周末","节假日"]),x=n([]),V=n([]),t=n({weekday:{time:0,income:0,meals:0},restday:{time:0,income:0,meals:0},holiday:{time:0,income:0,meals:0}}),O=[{label:"上海",value:"上海",start:"09:00",end:"17:30",overStart:"18:30"},{label:"合肥",value:"合肥",start:"09:00",end:"17:30",overStart:"18:30"},{label:"武汉",value:"武汉",start:"09:00",end:"17:30",overStart:"18:30"},{label:"办事处",value:"办事处",start:"09:00",end:"17:30",overStart:"18:30"},{label:"桂林",value:"桂林",start:"09:00",end:"18:00",overStart:"19:00"},{label:"佛山",value:"佛山",start:"09:00",end:"18:00",overStart:"19:00"},{label:"深圳",value:"深圳",start:"09:00",end:"18:00",overStart:"19:00"}],q=o=>{var e;let a=o.date,s=(e=w.value)==null?void 0:e.find(i=>i.date===a);return s?s.holiday?s.name:"补班":L(a).day()===0||L(a).day()===6?"休息":"白班"},r=o=>{if(!/^\d{2}:\d{2}$/.test(o))throw new Error("无效时间格式，应为 HH:mm");const[a,s]=o.split(":"),e=parseInt(a,10),i=parseInt(s,10);if(isNaN(e)||isNaN(i)||e<0||e>23||i<0||i>59)throw new Error("时间值超出范围 (小时: 0-23, 分钟: 0-59)");return e*60+i},P=()=>{let o=d.value.filter(e=>e.tag=="白班"||e.tag=="补班"),a=d.value.filter(e=>e.tag=="休息"),s=d.value.filter(e=>e.tag!="白班"&&e.tag!="补班"&&e.tag!="休息");t.value.weekday.time=0,t.value.restday.time=0,t.value.holiday.time=0,t.value.weekday.meals=0,t.value.restday.meals=0,t.value.holiday.meals=0,o.forEach(e=>{e.closeTime&&r(e.closeTime)-r(k.value.overStart)>0&&(t.value.weekday.meals+=20,e.startOverTime?t.value.weekday.time+=(r(e.closeTime)-r(e.startOverTime))/60:t.value.weekday.time+=(r(e.closeTime)-r(k.value.overStart))/60)}),a.forEach(e=>{e.closeTime&&(r(e.closeTime)-r(e.startWorkTime)>=240&&(t.value.restday.meals+=20),t.value.restday.time+=(r(e.closeTime)-r(e.startWorkTime))/60)}),s.forEach(e=>{e.closeTime&&(r(e.closeTime)-r(e.startWorkTime)>=240&&(t.value.holiday.meals+=20),t.value.holiday.time+=(r(e.closeTime)-r(e.startWorkTime))/60)})},Q=o=>{const a=o.reduce((e,i)=>{const m=i.SHIFTTERM;return e[m]||(e[m]=[]),e[m].push(i),e},{}),s=[];return Object.values(a).forEach(e=>{e.sort((i,m)=>new Date(i.CARDTIME)-new Date(m.CARDTIME)),s.push(e[0]),e.length>1&&s.push(e[e.length-1])}),s},X=o=>{const a=o.reduce((s,e)=>{const i=e.SHIFTTERM;return s[i]||(s[i]=[]),s[i].push(e),s},{});return Object.values(a).map(s=>{const e={date:s[0].SHIFTTERM,startWorkTime:L(s[0].CARDTIME).format("HH:mm"),userId:c.value.userId,closeTime:null};return s.length>=2&&(e.closeTime=L(s[s.length-1].CARDTIME).format("HH:mm")),e})},j=()=>E(this,null,function*(){let o=L().format("YYYY"),a=yield ue({year:o}),s=[];Object.keys(a.holiday).forEach(e=>{s.push(a.holiday[e])}),w.value=s}),Z=()=>E(this,null,function*(){let o=yield re();c.value=o.data}),J=()=>{let o=d.value.filter(e=>e.tag=="白班"||e.tag=="补班"),a=0;o.forEach(e=>{e.lateHour&&(a+=e.lateHour),e.earlyHour&&(a+=e.earlyHour)}),a>0?v.value=!0:v.value=!1;const s=["weekday","restday","holiday"];for(const e of s){if(a<=0)break;const i=t.value[e].time;if(i>0){const m=Math.min(a,i);t.value[e].time-=m,a-=m}}a>0&&(t.value.weekday.time=-a),a=0,t.value.weekday.income=t.value.weekday.time*20,t.value.restday.income=t.value.restday.time*30,t.value.holiday.income=t.value.holiday.time*60,t.value.weekday.income+t.value.restday.income+t.value.holiday.income>2e3?I.value=!0:I.value=!1,x.value=[],x.value.push([t.value.weekday.income.toFixed(2),t.value.restday.income.toFixed(2),t.value.holiday.income.toFixed(2)]),x.value.push([t.value.weekday.meals,t.value.restday.meals,t.value.holiday.meals]),x.value.push([(t.value.weekday.income+t.value.weekday.meals).toFixed(2),(t.value.restday.income+t.value.restday.meals).toFixed(2),(t.value.holiday.income+t.value.holiday.meals).toFixed(2)]),y.value.title.subtext=String((t.value.weekday.time+t.value.restday.time+t.value.holiday.time).toFixed(2))+"小时",V.value=[{value:t.value.weekday.time.toFixed(2),name:"工作日",itemStyle:{color:"#8fcd77"}},{value:t.value.restday.time.toFixed(2),name:"周末",itemStyle:{color:"#fbc85d"}},{value:t.value.holiday.time.toFixed(2),name:"节假日",itemStyle:{color:"#70bfdd"}}]},K=()=>E(this,null,function*(){k.value=O.find(o=>o.value===C.value),d.value.forEach(o=>{o.tag=q(o)}),P(),J()}),W=()=>{f.value="",d.value=[],v.value=!1,I.value=!1,x.value=[],V.value=[]},_=()=>E(this,null,function*(){let o=[];try{o=JSON.parse(f.value),o=Q(o);let a=X(o);d.value=a,K(),yield me({timeArr:d.value,userId:c.value.userId})}catch(a){console.error(a),ie.error("JSON格式错误");return}}),z=n({grid:{top:"15%",left:"3%",right:"2%",bottom:"8%",containLabel:!0},xAxis:{axisLabel:{color:"#000",textStyle:{fontSize:15,lineHeight:7},interval:"0",rotate:0},axisTick:{show:!0,alignWithLabel:!0},axisLine:{show:!0,lineStyle:{color:"rgba(203, 237, 255, 0.20)",width:1,type:"solid"}},splitLine:{show:!0,lineStyle:{color:"#E5E8EF"}},z:10},yAxis:{name:"元",nameTextStyle:{color:"#000",padding:[0,30,0,0],fontSize:16,fontWeight:700,fontFamily:"Microsoft YaHei, Microsoft YaHei"},nameGap:20,type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#000",textStyle:{fontSize:12}},splitLine:{show:!0,lineStyle:{color:"#005FA2",type:"dashed"}},splitNumber:4},series:[{type:"bar",showBackground:!1,barWidth:16,itemStyle:{color:new N(0,0,0,1,[{offset:0,color:"#1bd191"},{offset:1,color:"#0ba972"}]),borderRadius:[12,12,0,0]},name:"加班收入"},{type:"bar",showBackground:!1,barWidth:16,itemStyle:{color:new N(0,0,0,1,[{offset:0,color:"rgba(18, 198, 255, 1)"},{offset:1,color:"rgba(5, 120, 255, 1)"}]),borderRadius:[12,12,0,0]},name:"餐费补贴"},{type:"bar",showBackground:!1,barWidth:16,itemStyle:{color:new N(0,0,0,1,[{offset:0,color:"#ffb06c"},{offset:1,color:"#fa851e"}]),borderRadius:[12,12,0,0]},name:"总收入"}],tooltip:{trigger:"axis",axisPointer:{type:"shadow"},textStyle:{textShadowColor:"transparent",textShadowBlur:10},valueFormatter:function(o){return o+"元"}}}),y=n({title:{text:"加班时长",left:"49%",top:"30%",subtext:"0",textAlign:"center",textVerticalAlign:"top",textStyle:{color:"#000",fontSize:16},subtextStyle:{color:"#000",fontSize:12}},tooltip:{trigger:"item",className:"custom-tooltip-box",formatter:function(o){let a=[{name:"时长",value:o.value+"小时"},{name:"占比",value:o.percent+"%"}];return p(ce,{title:o.name,list:a})}},grid:{top:"10%",right:"3%",left:"3%",bottom:"10%"},legend:{bottom:"12",left:"center"},label:{show:!1},labelLine:{normal:{show:!1}},series:[{type:"pie",label:{show:!0,position:"outside",formatter:"{c}小时，{d}%",fontSize:15,color:"#000"},padAngle:2,center:["50%","35%"],radius:["40%","60%"],data:[]}]});return Z(),j(),(o,a)=>{const s=S("el-option"),e=S("el-select"),i=S("el-button"),m=S("el-alert"),$=S("el-input");return T(),b("div",ye,[l("div",ge,[pe,l("div",we,[xe,l("div",be,[h(e,{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=g=>C.value=g),placeholder:"请选择工作地区",style:{"margin-right":"12px"}},{default:Y(()=>[(T(),b(G,null,ae(O,g=>h(s,{key:g.value,label:g.label,value:g.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),h(i,{plain:"",icon:"Delete",type:"danger",onClick:W},{default:Y(()=>[R("清空")]),_:1}),h(i,{icon:"Upload",type:"success",onClick:_},{default:Y(()=>[R("导入")]),_:1})])]),h(m,{title:"提示",type:"warning",description:"请输入JSON格式的加班数据，数据可从https://hr.quectel.com/portal/index中获取","show-icon":"",closable:!1}),l("div",Te,[h($,{modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=g=>f.value=g),type:"textarea",placeholder:"请输入JSON格式的加班数据"},null,8,["modelValue"])])]),l("div",Ce,[ke,d.value.length?(T(),b(G,{key:0},[l("div",Ee,[l("div",Se,[l("img",{src:B(ve)},null,8,Le),l("div",Ie,[ze,l("div",Fe,D((t.value.weekday.income+t.value.restday.income+t.value.holiday.income).toFixed(2))+"元",1),v.value?(T(),b("div",Be,"(存在请假扣除)")):F("",!0)]),I.value?(T(),b("div",De,"封顶2000元")):F("",!0)]),l("div",Ve,[l("img",{src:B(he)},null,8,Ye),l("div",Ne,[Me,l("div",Oe,D((t.value.weekday.meals+t.value.restday.meals+t.value.holiday.meals).toFixed(2))+"元",1)])]),l("div",Ge,[l("img",{src:B(Ae)},null,8,Re),l("div",Ue,[He,l("div",qe,D((t.value.weekday.time+t.value.restday.time+t.value.holiday.time).toFixed(2))+"小时 ",1),v.value?(T(),b("div",Pe,"(存在请假扣除)")):F("",!0)])]),l("div",Qe,[l("img",{src:B(fe)},null,8,Xe),l("div",je,[Ze,l("div",Je,D(t.value.weekday.income+t.value.restday.income+t.value.holiday.income>2e3?(2e3+t.value.weekday.meals+t.value.restday.meals+t.value.holiday.meals).toFixed(2):(t.value.weekday.income+t.value.restday.income+t.value.holiday.income+t.value.weekday.meals+t.value.restday.meals+t.value.holiday.meals).toFixed(2))+"元",1)])])]),l("div",Ke,[We,l("div",_e,[h(ne,{"x-labels":H.value,values:x.value,legend:{data:["收入"],show:!1},"data-zoom":[{start:0,end:100,disabled:!0}],multiplyBar:!0,unit:"元",grid:z.value.grid,xAxis:z.value.xAxis,yAxis:z.value.yAxis,series:z.value.series},null,8,["x-labels","values","grid","xAxis","yAxis","series"])])]),l("div",$e,[et,l("div",tt,[h(de,{pieData:V.value,title:y.value.title,legend:y.value.legend,label:y.value.label,labelLine:y.value.labelLine,serie:y.value.series[0],toolTip:y.value.tooltip},null,8,["pieData","title","legend","label","labelLine","serie","toolTip"])])])],64)):F("",!0)])])}}},ut=ee(at,[["__scopeId","data-v-e4dfe5da"]]);export{ut as default};
