var B=(r,f,V)=>new Promise((I,i)=>{var U=_=>{try{C(V.next(_))}catch(N){i(N)}},S=_=>{try{C(V.throw(_))}catch(N){i(N)}},C=_=>_.done?I(_.value):Promise.resolve(_.value).then(U,S);C((V=V.apply(r,f)).next())});import{y as P,I as ge,g as be,r as y,J as ye,P as ve,d as s,M as j,c as K,o as p,N as v,f as e,O as L,i as l,h as a,j as Q,F as A,z as O,s as h,k as c,K as J,e as M,A as G}from"./index-Cvg2Ob7C.js";import{d as he}from"./export-DRQPRSom.js";function Ve(r){return P({url:"/system/post/list",method:"get",params:r})}function Ce(r){return P({url:"/system/post/"+r,method:"get"})}function we(r){return P({url:"/system/post",method:"post",data:r})}function ke(r){return P({url:"/system/post",method:"put",data:r})}function Se(r){return P({url:"/system/post/"+r,method:"delete"})}function Ne(r){return P({url:"/system/post/export",method:"post",data:r,responseType:"blob"})}const xe={class:"app-container"},Pe={class:"dialog-footer"},Ue=ge({name:"Post"}),qe=Object.assign(Ue,{setup(r){const{proxy:f}=be(),{sys_normal_disable:V}=f.useDict("sys_normal_disable"),I=y([]),i=y(!1),U=y(!0),S=y(!0),C=y([]),_=y(!0),N=y(!0),q=y(0),$=y(""),H=ye({form:{},queryParams:{pageNum:1,pageSize:10,postCode:void 0,postName:void 0,status:void 0},rules:{postName:[{required:!0,message:"岗位名称不能为空",trigger:"blur"}],postCode:[{required:!0,message:"岗位编码不能为空",trigger:"blur"}],postSort:[{required:!0,message:"岗位顺序不能为空",trigger:"blur"}]}}),{queryParams:d,form:u,rules:W}=ve(H);function k(){U.value=!0,Ve(d.value).then(n=>{I.value=n.rows,q.value=n.total,U.value=!1})}function X(){i.value=!1,E()}function E(){u.value={postId:void 0,postCode:void 0,postName:void 0,postSort:0,status:"0",remark:void 0},f.resetForm("postRef")}function D(){d.value.pageNum=1,k()}function Y(){f.resetForm("queryRef"),D()}function Z(n){C.value=n.map(o=>o.postId),_.value=n.length!=1,N.value=!n.length}function ee(){E(),i.value=!0,$.value="添加岗位"}function T(n){E();const o=n.postId||C.value;Ce(o).then(b=>{u.value=b.data,i.value=!0,$.value="修改岗位"})}function te(){f.$refs.postRef.validate(n=>{n&&(u.value.postId!=null?ke(u.value).then(o=>{f.$modal.msgSuccess("修改成功"),i.value=!1,k()}):we(u.value).then(o=>{f.$modal.msgSuccess("新增成功"),i.value=!1,k()}))})}function F(n){const o=n.postId||C.value;f.$modal.confirm('是否确认删除岗位编号为"'+o+'"的数据项？').then(function(){return Se(o)}).then(()=>{k(),f.$modal.msgSuccess("删除成功")}).catch(()=>{})}function le(){return B(this,null,function*(){let n={};C.value.forEach((b,m)=>{n[m]=b});let o=yield Ne(n);he(o)})}return k(),(n,o)=>{const b=s("el-input"),m=s("el-form-item"),oe=s("el-option"),ae=s("el-select"),g=s("el-button"),z=s("el-form"),R=s("el-col"),ne=s("right-toolbar"),se=s("el-row"),w=s("el-table-column"),ue=s("dict-tag"),re=s("el-table"),de=s("pagination"),pe=s("el-input-number"),ie=s("el-radio"),me=s("el-radio-group"),ce=s("el-dialog"),x=j("hasPermi"),fe=j("loading");return p(),K("div",xe,[v(e(z,{model:l(d),ref:"queryRef",inline:!0},{default:a(()=>[e(m,{label:"岗位编码",prop:"postCode"},{default:a(()=>[e(b,{modelValue:l(d).postCode,"onUpdate:modelValue":o[0]||(o[0]=t=>l(d).postCode=t),placeholder:"请输入岗位编码",clearable:"",style:{width:"200px"},onKeyup:Q(D,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(m,{label:"岗位名称",prop:"postName"},{default:a(()=>[e(b,{modelValue:l(d).postName,"onUpdate:modelValue":o[1]||(o[1]=t=>l(d).postName=t),placeholder:"请输入岗位名称",clearable:"",style:{width:"200px"},onKeyup:Q(D,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(m,{label:"状态",prop:"status"},{default:a(()=>[e(ae,{modelValue:l(d).status,"onUpdate:modelValue":o[2]||(o[2]=t=>l(d).status=t),placeholder:"岗位状态",clearable:"",style:{width:"200px"}},{default:a(()=>[(p(!0),K(A,null,O(l(V),t=>(p(),h(oe,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,null,{default:a(()=>[e(g,{type:"primary",icon:"Search",onClick:D},{default:a(()=>[c("搜索")]),_:1}),e(g,{icon:"Refresh",onClick:Y},{default:a(()=>[c("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[L,l(S)]]),e(se,{gutter:10,class:"mb8"},{default:a(()=>[e(R,{span:1.5},{default:a(()=>[v((p(),h(g,{type:"primary",plain:"",icon:"Plus",onClick:ee},{default:a(()=>[c("新增")]),_:1})),[[x,["system:post:add"]]])]),_:1}),e(R,{span:1.5},{default:a(()=>[v((p(),h(g,{type:"success",plain:"",icon:"Edit",disabled:l(_),onClick:T},{default:a(()=>[c("修改")]),_:1},8,["disabled"])),[[x,["system:post:edit"]]])]),_:1}),e(R,{span:1.5},{default:a(()=>[v((p(),h(g,{type:"danger",plain:"",icon:"Delete",disabled:l(N),onClick:F},{default:a(()=>[c("删除")]),_:1},8,["disabled"])),[[x,["system:post:remove"]]])]),_:1}),e(R,{span:1.5},{default:a(()=>[v((p(),h(g,{type:"warning",plain:"",icon:"Download",onClick:le},{default:a(()=>[c("导出")]),_:1})),[[x,["system:post:export"]]])]),_:1}),e(ne,{showSearch:l(S),"onUpdate:showSearch":o[3]||(o[3]=t=>J(S)?S.value=t:null),onQueryTable:k},null,8,["showSearch"])]),_:1}),v((p(),h(re,{data:l(I),onSelectionChange:Z},{default:a(()=>[e(w,{type:"selection",width:"55",align:"center"}),e(w,{label:"岗位编号",align:"center",prop:"postId"}),e(w,{label:"岗位编码",align:"center",prop:"postCode"}),e(w,{label:"岗位名称",align:"center",prop:"postName"}),e(w,{label:"岗位排序",align:"center",prop:"postSort"}),e(w,{label:"状态",align:"center",prop:"status"},{default:a(t=>[e(ue,{options:l(V),value:t.row.status},null,8,["options","value"])]),_:1}),e(w,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:a(t=>[M("span",null,G(n.parseTime(t.row.createTime)),1)]),_:1}),e(w,{label:"操作",width:"180",align:"center","class-name":"small-padding fixed-width"},{default:a(t=>[v((p(),h(g,{link:"",type:"primary",icon:"Edit",onClick:_e=>T(t.row)},{default:a(()=>[c("修改")]),_:2},1032,["onClick"])),[[x,["system:post:edit"]]]),v((p(),h(g,{link:"",type:"primary",icon:"Delete",onClick:_e=>F(t.row)},{default:a(()=>[c("删除")]),_:2},1032,["onClick"])),[[x,["system:post:remove"]]])]),_:1})]),_:1},8,["data"])),[[fe,l(U)]]),v(e(de,{total:l(q),page:l(d).pageNum,"onUpdate:page":o[4]||(o[4]=t=>l(d).pageNum=t),limit:l(d).pageSize,"onUpdate:limit":o[5]||(o[5]=t=>l(d).pageSize=t),onPagination:k},null,8,["total","page","limit"]),[[L,l(q)>0]]),e(ce,{title:l($),modelValue:l(i),"onUpdate:modelValue":o[11]||(o[11]=t=>J(i)?i.value=t:null),width:"500px","append-to-body":""},{footer:a(()=>[M("div",Pe,[e(g,{type:"primary",onClick:te},{default:a(()=>[c("确 定")]),_:1}),e(g,{onClick:X},{default:a(()=>[c("取 消")]),_:1})])]),default:a(()=>[e(z,{ref:"postRef",model:l(u),rules:l(W),"label-width":"80px"},{default:a(()=>[e(m,{label:"岗位名称",prop:"postName"},{default:a(()=>[e(b,{modelValue:l(u).postName,"onUpdate:modelValue":o[6]||(o[6]=t=>l(u).postName=t),placeholder:"请输入岗位名称"},null,8,["modelValue"])]),_:1}),e(m,{label:"岗位编码",prop:"postCode"},{default:a(()=>[e(b,{modelValue:l(u).postCode,"onUpdate:modelValue":o[7]||(o[7]=t=>l(u).postCode=t),placeholder:"请输入编码名称"},null,8,["modelValue"])]),_:1}),e(m,{label:"岗位顺序",prop:"postSort"},{default:a(()=>[e(pe,{modelValue:l(u).postSort,"onUpdate:modelValue":o[8]||(o[8]=t=>l(u).postSort=t),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1}),e(m,{label:"岗位状态",prop:"status"},{default:a(()=>[e(me,{modelValue:l(u).status,"onUpdate:modelValue":o[9]||(o[9]=t=>l(u).status=t)},{default:a(()=>[(p(!0),K(A,null,O(l(V),t=>(p(),h(ie,{key:t.value,label:t.value},{default:a(()=>[c(G(t.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"备注",prop:"remark"},{default:a(()=>[e(b,{modelValue:l(u).remark,"onUpdate:modelValue":o[10]||(o[10]=t=>l(u).remark=t),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{qe as default};
