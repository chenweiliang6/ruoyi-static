var he=Object.defineProperty;var K=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var O=(m,p,s)=>p in m?he(m,p,{enumerable:!0,configurable:!0,writable:!0,value:s}):m[p]=s,T=(m,p)=>{for(var s in p||(p={}))ye.call(p,s)&&O(m,s,p[s]);if(K)for(var s of K(p))ve.call(p,s)&&O(m,s,p[s]);return m};var d=(m,p,s)=>new Promise((C,n)=>{var V=u=>{try{v(s.next(u))}catch(b){n(b)}},S=u=>{try{v(s.throw(u))}catch(b){n(b)}},v=u=>u.done?C(u.value):Promise.resolve(u.value).then(V,S);v((s=s.apply(m,p)).next())});import{_ as be,a as _e,r as i,J as we,x as ke,d as f,M as Ie,c as B,o as c,s as _,l as k,e as Q,f as l,N as G,h as o,k as I,A as Ce,O as Se,E as U,D as h}from"./index-Cvg2Ob7C.js";import De from"./index-BhH4B5Js.js";import Pe from"./index-DjMwqi4L.js";import{g as xe,h as Ne,i as Be,j as $,k as Ve}from"./index-CuXSSHXt.js";import{g as Te}from"./user-fyIOEaJ9.js";import qe from"./index-BtRkZc2-.js";import"./index-DUksNF2m.js";const Le=[{type:"input",prop:"name",label:"球鞋名称",width:12,formItemProps:{placeholder:"请输入球鞋名称"},rule:[{required:!0,message:"请输入球鞋名称",trigger:"blur"}]},{type:"select",prop:"classifyId",label:"品牌",width:12,formItemProps:{placeholder:"请选择品牌"},options:[],rule:[{required:!0,message:"请选择品牌",trigger:"change"}]},{type:"input",prop:"articleNumber",label:"货号",width:12,formItemProps:{placeholder:"请输入货号"},rule:[{required:!0,message:"请输入货号",trigger:"blur"}]},{type:"input",prop:"size",label:"尺码",width:12,formItemProps:{placeholder:"请输入尺码"},rule:[{required:!0,message:"请输入尺码",trigger:"blur"}]},{type:"input",prop:"price",label:"价格",width:12,formItemProps:{placeholder:"请输入价格"},rule:[{required:!0,message:"请输入价格",trigger:"blur"}]},{type:"input",prop:"stock",label:"库存",width:12,formItemProps:{placeholder:"请输入库存"},rule:[{required:!0,message:"请输入库存",trigger:"blur"}]},{type:"upload",uploadType:"img",listType:"picture-card",limit:1,prop:"files",label:"球鞋图片",width:12,formItemProps:{placeholder:"请上传球鞋图片"}},{type:"select",prop:"status",label:"状态",width:12,formItemProps:{placeholder:"请选择状态"},options:[{label:"正常",value:"1"},{value:"0",label:"停用"}]},{type:"textarea",prop:"remark",label:"备注",width:24,formItemProps:{placeholder:"请输入备注"}}],z=[{type:"input",prop:"name",label:"球鞋名称",width:12,formItemProps:{placeholder:"请输入球鞋名称"},rule:[{required:!0,message:"请输入球鞋名称",trigger:"blur"}]},{type:"select",prop:"classifyId",label:"品牌",width:12,formItemProps:{placeholder:"请选择品牌"},options:[],rule:[{required:!0,message:"请选择品牌",trigger:"change"}]},{type:"input",prop:"articleNumber",label:"货号",width:12,formItemProps:{placeholder:"请输入货号"},rule:[{required:!0,message:"请输入货号",trigger:"blur"}]},{type:"upload",uploadType:"img",listType:"picture-card",limit:1,prop:"files",label:"球鞋图片",width:12,formItemProps:{placeholder:"请上传球鞋图片"}},{type:"select",prop:"status",label:"状态",width:12,formItemProps:{placeholder:"请选择状态"},options:[{label:"正常",value:"1"},{value:"0",label:"停用"}]},{type:"textarea",prop:"remark",label:"备注",width:12,formItemProps:{placeholder:"请输入备注"}}],Ue={class:"app-container"},$e={class:"list-container"},ze=["src","onClick"],Ee={key:1},Me={key:0},Ae={key:1},Fe={class:"dialog-footer"},Re={__name:"list",setup(m){const p=_e(),s=i([{type:"input",prop:"name",label:"球鞋名称",placeholder:"请输入球鞋名称"},{type:"input",prop:"articleNumber",label:"货号",placeholder:"请输入货号"},{type:"select",prop:"classifyId",label:"品牌",placeholder:"请选择品牌"},{type:"select",prop:"status",label:"状态",placeholder:"请选择状态",options:[{label:"正常",value:"1"},{label:"停用",value:"0"}]}]),C=i([]),n=we({tableData:[],total:0,formData:{}}),V=i([]),S=i(!0),v=i(!1),u=i({pageNum:1,pageSize:10}),b=i({}),D=i(!1),E=i(!0),q=i({}),M=i([]),P=i(""),w=i(!1),A=i(null),L=i(!1),F=i(""),W=i("0"),R=i([]),X=()=>d(this,null,function*(){let a=yield Te();q.value=a.data}),y=()=>d(this,null,function*(){D.value=!0;try{q.value.roles.some(e=>e.roleKey=="admin")?v.value=!0:(b.value.createBy=q.value.userName,v.value=!1);let a=yield Ne(T(T({},u.value),b.value));n.tableData=a.rows.map(e=>(e.brand=M.value.find(r=>r.classifyId==e.classifyId).name,e)),n.total=a.total,D.value=!1}catch(a){D.value=!1}}),Y=()=>d(this,null,function*(){let a=yield xe({pageNum:1,pageSize:50});M.value=a.rows;let e=a.rows.map(r=>({value:r.classifyId,label:r.name}));s.value.find(r=>r.prop=="classifyId").options=e,Le.find(r=>r.prop=="classifyId").options=e,z.find(r=>r.prop=="classifyId").options=e}),Z=a=>d(this,null,function*(){D.value=!0,b.value=a,y()}),ee=a=>{V.value=a.map(e=>e.shoeId),E.value=!a.length},te=a=>{p.push({path:"/shoe-manage/detail",query:{articleNumber:a.articleNumber,shoeId:a.shoeId}})},ae=()=>{C.value=z,P.value="新增球鞋",w.value=!0,console.log("修改")},le=a=>{C.value=z,P.value="修改球鞋",w.value=!0,n.formData=T({},a)},j=a=>{U.confirm("是否确认删除该报账信息？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>d(this,null,function*(){let e=a.shoeId||V.value;yield Be({shoeId:e}),y(),h({type:"success",message:"删除成功"})})).catch(()=>{h({type:"info",message:"取消删除"})})},oe=a=>{U.confirm("是上架球鞋？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>d(this,null,function*(){let e=a.shoeId;yield $({shoeId:e,status:"1"}),y(),h({type:"success",message:"更改成功"})})).catch(()=>{h({type:"info",message:"取消更改"})})},re=a=>{U.confirm("是否下架球鞋？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>d(this,null,function*(){let e=a.shoeId;yield $({shoeId:e,status:"0"}),y(),h({type:"success",message:"更改成功"})})).catch(()=>{h({type:"info",message:"取消更改"})})},se=()=>d(this,null,function*(){A.value.submitRef().then(a=>d(this,null,function*(){var e;a&&(w.value=!1,(e=n.formData.files)!=null&&e.length&&(n.formData.photo=n.formData.files[0].url),delete n.formData.files,P.value=="新增球鞋"?(yield Ve(n.formData),h.success("新增成功")):P.value=="修改球鞋"&&(yield $(n.formData),h.success("修改成功")),y())}))}),ne=()=>{w.value=!1,h.info("取消")},ie=()=>{n.formData={}},pe=(a,e)=>{R.value=[{url:a}],F.value=e,L.value=!0};return ke(()=>d(this,null,function*(){yield X(),yield Y(),yield y()})),(a,e)=>{const r=f("el-button"),H=f("el-col"),ue=f("right-toolbar"),ce=f("el-row"),g=f("el-table-column"),J=f("el-tag"),x=f("el-tooltip"),de=f("el-table"),me=f("pagination"),fe=f("el-dialog"),ge=Ie("loading");return c(),B("div",Ue,[S.value?(c(),_(De,{key:0,settings:s.value,onHandleSearch:Z},null,8,["settings"])):k("",!0),Q("div",$e,[l(ce,{gutter:10,class:"mb8"},{default:o(()=>[l(H,{span:1.5},{default:o(()=>[l(r,{type:"primary",plain:"",icon:"Plus",onClick:ae},{default:o(()=>[I("新增")]),_:1})]),_:1}),l(H,{span:1.5},{default:o(()=>[l(r,{type:"danger",plain:"",icon:"Delete",disabled:E.value,onClick:j},{default:o(()=>[I("删除")]),_:1},8,["disabled"])]),_:1}),l(ue,{showSearch:S.value,"onUpdate:showSearch":e[0]||(e[0]=t=>S.value=t),onQueryTable:y},null,8,["showSearch"])]),_:1}),G((c(),_(de,{data:n.tableData,onSelectionChange:ee},{default:o(()=>[l(g,{type:"selection",width:"50",align:"center"}),l(g,{label:"名称",align:"center",prop:"name"}),l(g,{label:"品牌",align:"center",prop:"brand"}),l(g,{label:"货号",align:"center",prop:"articleNumber"}),l(g,{label:"图片",align:"center",prop:"photo"},{default:o(t=>[t.row.photo?(c(),B("img",{key:0,src:t.row.photo,style:{width:"60px",height:"60px",cursor:"pointer"},onClick:N=>pe(t.row.photo,t.row.name)},null,8,ze)):(c(),B("span",Ee,"暂无"))]),_:1}),l(g,{label:"状态",align:"center",prop:"status"},{default:o(t=>[t.row.status=="1"?(c(),_(J,{key:0,type:"success"},{default:o(()=>[I("正常")]),_:1})):k("",!0),t.row.status=="0"?(c(),_(J,{key:1,type:"danger"},{default:o(()=>[I("停用")]),_:1})):k("",!0)]),_:1}),v.value?(c(),_(g,{key:0,label:"创建者",align:"center",prop:"createBy"})):k("",!0),l(g,{label:"备注",align:"center",prop:"remark"},{default:o(t=>[t.row.remark?(c(),B("span",Me,Ce(t.row.remark),1)):(c(),B("span",Ae,"暂无"))]),_:1}),l(g,{label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},{default:o(t=>[l(x,{content:"查看",placement:"top"},{default:o(()=>[l(r,{link:"",type:"primary",icon:"View",onClick:N=>te(t.row)},null,8,["onClick"])]),_:2},1024),l(x,{content:"修改",placement:"top"},{default:o(()=>[l(r,{link:"",type:"primary",icon:"Edit",onClick:N=>le(t.row)},null,8,["onClick"])]),_:2},1024),l(x,{content:"删除",placement:"top"},{default:o(()=>[l(r,{link:"",type:"primary",icon:"Delete",onClick:N=>j(t.row)},null,8,["onClick"])]),_:2},1024),t.row.status=="0"?(c(),_(x,{key:0,content:"启用",placement:"top"},{default:o(()=>[l(r,{link:"",type:"primary",icon:"CircleCheck",onClick:N=>oe(t.row)},null,8,["onClick"])]),_:2},1024)):k("",!0),t.row.status=="1"?(c(),_(x,{key:1,content:"停用",placement:"top"},{default:o(()=>[l(r,{link:"",type:"primary",icon:"CircleClose",onClick:N=>re(t.row)},null,8,["onClick"])]),_:2},1024)):k("",!0)]),_:1})]),_:1},8,["data"])),[[ge,D.value]]),G(l(me,{total:n.total,page:u.value.pageNum,"onUpdate:page":e[1]||(e[1]=t=>u.value.pageNum=t),limit:u.value.pageSize,"onUpdate:limit":e[2]||(e[2]=t=>u.value.pageSize=t),onPagination:y},null,8,["total","page","limit"]),[[Se,n.total>0]])]),l(fe,{title:P.value,modelValue:w.value,"onUpdate:modelValue":e[4]||(e[4]=t=>w.value=t),width:"40%",onClosed:ie,draggable:"","destroy-on-close":!0},{footer:o(()=>[Q("div",Fe,[l(r,{type:"primary",onClick:se},{default:o(()=>[I("确 定")]),_:1}),l(r,{onClick:ne},{default:o(()=>[I("取 消")]),_:1})])]),default:o(()=>[l(Pe,{settings:C.value,modelValue:n.formData,"onUpdate:modelValue":e[3]||(e[3]=t=>n.formData=t),ref_key:"base_form",ref:A},null,8,["settings","modelValue"])]),_:1},8,["title","modelValue"]),l(qe,{modelValue:L.value,"onUpdate:modelValue":e[5]||(e[5]=t=>L.value=t),size:"auto","img-list":R.value,title:F.value,"init-number":W.value},null,8,["modelValue","img-list","title","init-number"])])}}},Xe=be(Re,[["__scopeId","data-v-94cf0068"]]);export{Xe as default};
